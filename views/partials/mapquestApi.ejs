<head>
    <script src="https://api.mqcdn.com/sdk/mapquest-js/v1.3.2/mapquest.js"></script>

    <link type="text/css" rel="stylesheet" href="https://api.mqcdn.com/sdk/mapquest-js/v1.3.2/mapquest.css" />

    <!-- link to MapQuest mapping API  -->
    <script type="text/javascript">

        window.onload = function () {
            L.mapquest.key = 'jRw3j8u1L7hkwK0zJk8B90DCWdyWazW4';
            var baseLayer = L.mapquest.tileLayer('map');

            var map = L.mapquest.map('map', {
                center: [15.87037, -97.07726],
                layers: baseLayer,
                zoom: 14
            });

            function onEachFeature(feature, layer) {
                // does this feature have a property named name?
                if (feature.properties && feature.properties.name) {
                    //show hostel name when clicked on
                    layer.bindPopup(feature.properties.name);
                }
            }

            //list of all hostels
            let hostelsList = {
                "type": "FeatureCollection",
                "features":
                    [{
                        "type": "Feature",
                        "properties": {
                            "name": "Vivo Escondido",
                        },
                        "geometry": {
                            "type": "Point",
                            "coordinates": [
                                -97.0788323879242,
                                15.862872024938756
                            ]
                        }
                    },
                    {
                        "type": "Feature",
                        "properties": {
                            "name": "Shalom"
                        },
                        "geometry": {
                            "type": "Point",
                            "coordinates": [
                                -97.07559764385223,
                                15.861654229715937
                            ]
                        }
                    },
                    {
                        "type": "Feature",
                        "properties": {
                            "name": "Zion Hostel & Bungalows"
                        },
                        "geometry": {
                            "type": "Point",
                            "coordinates": [
                                -97.0846152305603,
                                15.864838026280848
                            ]
                        }
                    },
                    {
                        "type": "Feature",
                        "properties": {
                            "name": "Napelero Hostel"
                        },
                        "geometry": {
                            "type": "Point",
                            "coordinates": [
                                -97.07742691040039,
                                15.86873901154986
                            ]
                        }
                    },
                    {
                        "type": "Feature",
                        "properties": {
                            "name": "Tower Bridge Hostel"
                        },
                        "geometry": {
                            "type": "Point",
                            "coordinates": [
                                -97.08043098449707,
                                15.868914450912325
                            ]
                        }
                    },
                    {
                        "type": "Feature",
                        "properties": {
                            "name": "Chez Gomez"
                        },
                        "geometry": {
                            "type": "Point",
                            "coordinates": [
                                -97.08293080329894,
                                15.86598356153021
                            ]
                        }
                    },
                    {
                        "type": "Feature",
                        "properties": {
                            "name": "Casa Losodeli"
                        },
                        "geometry": {
                            "type": "Point",
                            "coordinates": [
                                -97.07696557044983,
                                15.862526295686672
                            ]
                        }
                    },
                    {
                        "type": "Feature",
                        "properties": {
                            "name": "Paziflora Hostel"
                        },
                        "geometry": {
                            "type": "Point",
                            "coordinates": [
                                -97.07068920135498,
                                15.861081450606223
                            ]
                        }
                    },
                    {
                        "type": "Feature",
                        "properties": { "name": "Casa Santaella" },
                        "geometry": {
                            "type": "Point",
                            "coordinates": [
                                -97.070871591568,
                                15.866623407214531
                            ]
                        }
                    },
                    {
                        "type": "Feature",
                        "properties": { "name": "Residencia Artistica" },
                        "geometry": {
                            "type": "Point",
                            "coordinates": [
                                -97.07250237464905,
                                15.867087810068297
                            ]
                        }
                    },
                    {
                        "type": "Feature",
                        "properties": {
                            "name": "Puerto Dreams"
                        },
                        "geometry": {
                            "type": "Point",
                            "coordinates": [
                                -97.07285642623901,
                                15.868790611378197
                            ]
                        }
                    },
                    {
                        "type": "Feature",
                        "properties": {
                            "name": "Casona Puerto Dreams"
                        },
                        "geometry": {
                            "type": "Point",
                            "coordinates": [
                                -97.07966923713683,
                                15.87009092269141
                            ]
                        }
                    },
                    {
                        "type": "Feature",
                        "properties": {
                            "name": "Selina Puerto Escondido"
                        },
                        "geometry": {
                            "type": "Point",
                            "coordinates": [
                                -97.05803990364075,
                                15.856850059036839
                            ]
                        }
                    },
                    {
                        "type": "Feature",
                        "properties": {
                            "name": "Hostel Mandala"
                        },
                        "geometry": {
                            "type": "Point",
                            "coordinates": [
                                -97.05756783485413,
                                15.856385632604704
                            ]
                        }
                    },
                    {
                        "type": "Feature",
                        "properties": {
                            "name": "Huitzilin Hostal"
                        },
                        "geometry": {
                            "type": "Point",
                            "coordinates": [
                                -97.05261647701262,
                                15.851823876156457
                            ]
                        }
                    }
                    ]
            }

            //add a marker for each hostel on the list and attach the popup name to it
            L.geoJSON(hostelsList, {
                onEachFeature: onEachFeature
            }).addTo(map);


            //add the controls and other layers to map
            L.control.layers({
                'Map': baseLayer,
                'Hybrid': L.mapquest.tileLayer('hybrid'),
                'Satellite': L.mapquest.tileLayer('satellite'),
                'Light': L.mapquest.tileLayer('light'),
                'Dark': L.mapquest.tileLayer('dark')
            }).addTo(map);

            L.mapquest.control().addTo(map);
        }

    </script>

</head>

<!--            

             /*function generateMarkersFeatureGroup(response) {
                var group = [];
                for (var i = 0; i < response.features.length; i++) {
                    var hostelCalled = response.features[i].name;
                    var locationLat = response.features[i].geometry.coordinates[0];
                    var locationLang = response.features[i].geometry.coordinates[1];

                    // Create a marker for each location
                    var marker = L.marker([locationLang, locationLat], { icon: L.mapquest.icons.marker() })
                        .bindPopup(hostelCalled);

                    group.push(marker);
                }
                return L.featureGroup(group);
                console.log(hostelsList)
                console.log(group)
            }*/
        //} 
    </script>
</head> -->